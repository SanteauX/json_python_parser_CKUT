# -*- coding: utf-8 -*-

text = '''["{\"@attributes\":{\"class\":\"adminToolsLine\"},\"#text\":[\"\\n\",\"\\n\",\"\\n\",\"\\n\",\"\\n\",\"\\n\",\"\\n\",\"\\n          \"],\"TD\":[{\"@attributes\":{\"class\":\"adminToolsBox1\",\"type\":\"text\",\"name\":\"Artist\",\"id\":\"Artist\"},\"#text\":\"\\nArtist02\\n\"},{\"@attributes\":{\"class\":\"adminToolsBox1\",\"type\":\"text\",\"name\":\"Album\",\"id\":\"Album\"},\"#text\":\"\\nALbum from Artist02\\n\"},{\"@attributes\":{\"class\":\"adminToolsBox2\",\"type\":\"text\",\"name\":\"Track\",\"id\":\"Track\"},\"#text\":\"\\nihnj\\n\"},{\"@attributes\":{\"class\":\"adminToolsBox3\",\"type\":\"text\",\"name\":\"Genre\",\"id\":\"Genre\"},\"#text\":\"\\nIndie\\n\"},{\"@attributes\":{\"class\":\"adminToolsBox3\",\"type\":\"text\",\"name\":\"Length\",\"id\":\"Length\"},\"#text\":\"\\n9:32\\n\"},{\"@attributes\":{\"class\":\"adminToolsBox1\",\"type\":\"text\",\"name\":\"Infos\",\"id\":\"Infos\"},\"#text\":\"\\ninjojn k\\n\"},{\"@attributes\":{\"class\":\"adminPlaylistCheckbox\",\"name\":\"checkboxS\",\"id\":\"checkboxS\",\"data-children-count\":\"1\"},\"#text\":[\"\\n\",\"\\n\"],\"INPUT\":{\"@attributes\":{\"type\":\"checkbox\",\"name\":\"checkboxLine\"}}}]}","{\"@attributes\":{\"class\":\"adminToolsLine\"},\"#text\":[\"\\n\",\"\\n\",\"\\n\",\"\\n\",\"\\n\",\"\\n\",\"\\n\",\"\\n          \"],\"TD\":[{\"@attributes\":{\"class\":\"adminToolsBox1\",\"type\":\"text\",\"name\":\"Artist\",\"id\":\"Artist\"},\"#text\":\"\\nArtist02\\n\"},{\"@attributes\":{\"class\":\"adminToolsBox1\",\"type\":\"text\",\"name\":\"Album\",\"id\":\"Album\"},\"#text\":\"\\nALbum from Artist02\\n\"},{\"@attributes\":{\"class\":\"adminToolsBox2\",\"type\":\"text\",\"name\":\"Track\",\"id\":\"Track\"},\"#text\":\"\\nmorceau 2\\n\"},{\"@attributes\":{\"class\":\"adminToolsBox3\",\"type\":\"text\",\"name\":\"Genre\",\"id\":\"Genre\"},\"#text\":\"\\nPunk\\n\"},{\"@attributes\":{\"class\":\"adminToolsBox3\",\"type\":\"text\",\"name\":\"Length\",\"id\":\"Length\"},\"#text\":\"\\n09898:9809\\n\"},{\"@attributes\":{\"class\":\"adminToolsBox1\",\"type\":\"text\",\"name\":\"Infos\",\"id\":\"Infos\"},\"#text\":\"\\nINJKBIHNJK \\n\"},{\"@attributes\":{\"class\":\"adminPlaylistCheckbox\",\"name\":\"checkboxS\",\"id\":\"checkboxS\",\"data-children-count\":\"1\"},\"#text\":[\"\\n\",\"\\n\"],\"INPUT\":{\"@attributes\":{\"type\":\"checkbox\",\"name\":\"checkboxLine\"}}}]}","{\"@attributes\":{\"class\":\"adminToolsLine\"},\"#text\":[\"\\n\",\"\\n\",\"\\n\",\"\\n\",\"\\n\",\"\\n\",\"\\n\",\"\\n          \"],\"TD\":[{\"@attributes\":{\"class\":\"adminToolsBox1\",\"type\":\"text\",\"name\":\"Artist\",\"id\":\"Artist\"},\"#text\":\"\\nArtist02\\n\"},{\"@attributes\":{\"class\":\"adminToolsBox1\",\"type\":\"text\",\"name\":\"Album\",\"id\":\"Album\"},\"#text\":\"\\nALbum from Artist02\\n\"},{\"@attributes\":{\"class\":\"adminToolsBox2\",\"type\":\"text\",\"name\":\"Track\",\"id\":\"Track\"},\"#text\":\"\\nihnj2\\n\"},{\"@attributes\":{\"class\":\"adminToolsBox3\",\"type\":\"text\",\"name\":\"Genre\",\"id\":\"Genre\"},\"#text\":\"\\nIndie\\n\"},{\"@attributes\":{\"class\":\"adminToolsBox3\",\"type\":\"text\",\"name\":\"Length\",\"id\":\"Length\"},\"#text\":\"\\n9:32\\n\"},{\"@attributes\":{\"class\":\"adminToolsBox1\",\"type\":\"text\",\"name\":\"Infos\",\"id\":\"Infos\"},\"#text\":\"\\ninjojn k2\\n\"},{\"@attributes\":{\"class\":\"adminPlaylistCheckbox\",\"name\":\"checkboxS\",\"id\":\"checkboxS\",\"data-children-count\":\"1\"},\"#text\":[\"\\n\",\"\\n\"],\"INPUT\":{\"@attributes\":{\"type\":\"checkbox\",\"name\":\"checkboxLine\"}}}]}","{\"@attributes\":{\"class\":\"adminToolsLine\"},\"#text\":[\"\\n\",\"\\n\",\"\\n\",\"\\n\",\"\\n\",\"\\n\",\"\\n\",\"\\n          \"],\"TD\":[{\"@attributes\":{\"class\":\"adminToolsBox1\",\"type\":\"text\",\"name\":\"Artist\",\"id\":\"Artist\"},\"#text\":\"\\nTest3 (submit id)\\n\"},{\"@attributes\":{\"class\":\"adminToolsBox1\",\"type\":\"text\",\"name\":\"Album\",\"id\":\"Album\"},\"#text\":\"\\nalbm3\\n\"},{\"@attributes\":{\"class\":\"adminToolsBox2\",\"type\":\"text\",\"name\":\"Track\",\"id\":\"Track\"},\"#text\":\"\\nT01\\n\"},{\"@attributes\":{\"class\":\"adminToolsBox3\",\"type\":\"text\",\"name\":\"Genre\",\"id\":\"Genre\"},\"#text\":\"\\ngenre\\n\"},{\"@attributes\":{\"class\":\"adminToolsBox3\",\"type\":\"text\",\"name\":\"Length\",\"id\":\"Length\"},\"#text\":\"\\n90:98\\n\"},{\"@attributes\":{\"class\":\"adminToolsBox1\",\"type\":\"text\",\"name\":\"Infos\",\"id\":\"Infos\"},\"#text\":\"\\niunj\\n\"},{\"@attributes\":{\"class\":\"adminPlaylistCheckbox\",\"name\":\"checkboxS\",\"id\":\"checkboxS\",\"data-children-count\":\"1\"},\"#text\":[\"\\n\",\"\\n\"],\"INPUT\":{\"@attributes\":{\"type\":\"checkbox\",\"name\":\"checkboxLine\"}}}]}","{\"@attributes\":{\"class\":\"adminToolsLine\"},\"#text\":[\"\\n\",\"\\n\",\"\\n\",\"\\n\",\"\\n\",\"\\n\",\"\\n\",\"\\n          \"],\"TD\":[{\"@attributes\":{\"class\":\"adminToolsBox1\",\"type\":\"text\",\"name\":\"Artist\",\"id\":\"Artist\"},\"#text\":\"\\nArtisteLocal0298\\n\"},{\"@attributes\":{\"class\":\"adminToolsBox1\",\"type\":\"text\",\"name\":\"Album\",\"id\":\"Album\"},\"#text\":\"\\nAlbumNÂ°9876\\n\"},{\"@attributes\":{\"class\":\"adminToolsBox2\",\"type\":\"text\",\"name\":\"Track\",\"id\":\"Track\"},\"#text\":\"\\nTitre02\\n\"},{\"@attributes\":{\"class\":\"adminToolsBox3\",\"type\":\"text\",\"name\":\"Genre\",\"id\":\"Genre\"},\"#text\":\"\\nJazz\\n\"},{\"@attributes\":{\"class\":\"adminToolsBox3\",\"type\":\"text\",\"name\":\"Length\",\"id\":\"Length\"},\"#text\":\"\\n3:33\\n\"},{\"@attributes\":{\"class\":\"adminToolsBox1\",\"type\":\"text\",\"name\":\"Infos\",\"id\":\"Infos\"},\"#text\":\"\\n_____789\\n\"},{\"@attributes\":{\"class\":\"adminPlaylistCheckbox\",\"name\":\"checkboxS\",\"id\":\"checkboxS\",\"data-children-count\":\"1\"},\"#text\":[\"\\n\",\"\\n\"],\"INPUT\":{\"@attributes\":{\"type\":\"checkbox\",\"name\":\"checkboxLine\"}}}]}"]'''

def get_section_i(text):
        beginning = text.find("TD")
        text = text.replace("TD", "", 1)
        end = text[beginning:].find("TD")
        return text[beginning:end]

def remove_section_i(text):
        text = text.replace('''"TD":  "TD"''', '''"TD":''')
        beginning = text.find("TD")
        text = text.replace("TD", "", 1)
        end = text[beginning:].find("TD")
        return text[end:]

def clean_text(text):
    text = text.replace("              ", "")
    text = text.replace('''          ''', '')
    text = text.replace("            ", "")
    text = text.replace('''\n''', "")
    text = text.replace('''\"''', "")
    return text

def parse_request(text):
    result = ""
    lines = []
    text = clean_text(text)
    main = text[text.find('''TD'''):]+"TD_THE_END"
    tracks = main.count("TD")
    for i in range(0, tracks -1):
        section_i = get_section_i(main)
        item = section_i_to_array(section_i)
        print(item)
        item[3] = item[3].replace(" ", "")
        main = remove_section_i(main)
    return result

def section_i_to_array(section_i):
    array = []
    for i in range(0, 6):
        item = get_sub_section(section_i)
        item_clean = clean_sub_section(item)
        array.append(item_clean)
        section_i = remove_sub_section_i(section_i)
    return array

def get_sub_section(text):
    beginning = text.find('''@attributes:{''')
    text = text.replace('''@attributes:{''', "", 1)
    end = text[beginning:].find('''@attributes:{''')
    return text[beginning:end]

def remove_sub_section_i(text):
    beginning = text.find('''@attributes:{''')
    text = text.replace('''@attributes:{''', "", 1)
    end = text[beginning:].find('''@attributes:{''')
    return text[end:]


def clean_sub_section(item):
    #print("\n\n item:\n"+item+"\n")
    beginning = item.find('''#text:''')
    item = item.replace('''#text:''', "", 1)
    final_item = item[beginning:].replace(''' "''', "").replace('''\n''', "").replace("  ", "").replace('''\\n''', "")
    #print("======> "+final_item)
    return final_item





parse_request(text)
